<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="robots" content="noindex" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Page</title>
    <style>
      * {
        background-color: darkslategrey;
      }
    </style>
  </head>
  <body>
    <h1>Check the console for test outputs</h1>

    <!-- <section style="width: 650px">
      <video
        style="max-width: 100%; border-radius: 50%"
        autoplay
        src="/images/video/nutty_drumming.mp4"
      ></video>
    </section> -->

    <h2>Output:</h2>
    <p><span id="output"></span></p>

    <video controls>
      <source src="/images/video/nutty_drumming.mp4" type="video/mp4" />
    </video>

    <!-- Check https://quuz.org/webvtt/ for validation. -->
    <script type="text/vtt" id="subtitle" data-label="English" data-lang="en">
      WEBVTT

      1
      00:00:02.500 --> 00:00:05.250
      Instead of loading an external .vtt file,

      2
      00:00:05.250 --> 00:00:09.750
      The workaround is to embed it inside a script tag,

      3
      00:00:10.001 --> 00:00:13.000
      And then dynamically add it to the DOM,

      4
      00:00:13.001 --> 00:00:16.000
      Using a Blob URL.
    </script>

    <script>
      function init() {
        // http://www.html5rocks.com/en/tutorials/track/basics/
        // https://www.iandevlin.com/blog/2015/02/javascript/dynamically-adding-text-tracks-to-html5-video
        var video = document.querySelector("video");
        var subtitle = document.getElementById("subtitle");
        var blob = new Blob([subtitle.textContent.trimStart()], {
          type: "text/vtt",
        });
        var track = document.createElement("track");
        track.kind = "subtitles";
        track.label = subtitle.dataset.label;
        track.srclang = subtitle.dataset.lang;
        track.default = true;
        track.src = URL.createObjectURL(blob);
        video.appendChild(track);
        console.log("init() has run");
      }
      init();
    </script>

    <script type="module" src="js_object_to_json.js"></script>
  </body>
</html>
